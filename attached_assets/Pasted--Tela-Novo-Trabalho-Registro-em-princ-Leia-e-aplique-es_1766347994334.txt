 Tela “Novo Trabalho” (Registro em princ)

Leia e aplique este contexto antes de qualquer implementação:

Projeto: xFinance 3.0 — migração do frontend de Python/Dash para React/TypeScript + FastAPI.
Banco: SQLite (xFinanceDB.db) do sistema original; manter nomenclaturas alinhadas com o schema existente para reaproveitar queries.
Regras: não alterar estética/tema (glassmorphism, lilás/ciano, gradientes), não mudar estrutura de componentes, não mexer nas animações Framer Motion, não adicionar/remover dependências, usar Radix UI conforme já adotado.
Objetivo:

Criar a tela “Novo Trabalho” (novo registro na tabela princ), com visual premium e consistente com o restante do sistema, preparada para futura integração com FastAPI/SQLite.
Antes de codar, pesquise referências visuais de “premium glassmorphism dashboard forms”, “Radix UI form patterns”, “Framer Motion micro-interactions” e aplique padrões compatíveis com nosso tema.
Entregáveis:

Página NovoTrabalhoPage acessível por "/trabalhos/novo" sem alterar a estrutura existente.
Componente de formulário NovoTrabalhoForm com validações e acessibilidade.
Tipos TypeScript em src/types/trabalho.ts.
Serviço de API em src/services/api/trabalhos.ts com stubs para futura conexão FastAPI.
Não criar novas dependências; usar fetch, Radix UI e Framer Motion já presentes.
Campos e nomenclaturas — usar exatamente estas chaves no estado e no payload (compatíveis com princ):

Chaves principais:
id_contr (INTEGER, obrigatório) — Contratante
id_segur (INTEGER, obrigatório) — Segurado
id_ativi (INTEGER, obrigatório) — Atividade (FK)
id_uf (INTEGER, obrigatório) — UF (FK)
id_cidade (INTEGER, obrigatório) — Cidade (FK, dependente de id_uf)
dt_inspecao (TEXT, obrigatório) — Data da inspeção
honorario (REAL, opcional, ≥ 0)
despesa (REAL, opcional, ≥ 0)
prazo (INTEGER, opcional, ≥ 0, dias)
obs (TEXT, opcional)
Datas adicionais (opcionais):
dt_acerto, dt_envio, dt_pago, dt_entregue, dt_denvio, dt_dpago
Atribuição de usuários (opcional):
id_user_guy (INTEGER), id_user_guilty (INTEGER)
guy_honorario (REAL), guy_despesa (REAL), dt_guy_pago (TEXT), dt_guy_dpago (TEXT)
Flags/controle:
meta (INTEGER, padrão 1 para “Sim” / 0 para “Não”)
ms (INTEGER, padrão 0)
Observação de compatibilidade:
A coluna atividade (TEXT) existe; preencher automaticamente com o label da atividade selecionada, mantendo id_ativi como fonte de verdade.
Tipos TypeScript (em src/types/trabalho.ts):

interface Trabalho { id_princ: number; id_contr: number; id_segur: number; id_ativi: number; id_uf: number; id_cidade: number; dt_inspecao: string; honorario?: number; despesa?: number; prazo?: number; obs?: string; dt_acerto?: string; dt_envio?: string; dt_pago?: string; dt_entregue?: string; dt_denvio?: string; dt_dpago?: string; id_user_guy?: number; id_user_guilty?: number; dt_guy_pago?: string; dt_guy_dpago?: string; guy_honorario?: number; guy_despesa?: number; atividade?: string; meta?: number; ms?: number }
interface TrabalhoInput { id_contr: number; id_segur: number; id_ativi: number; id_uf: number; id_cidade: number; dt_inspecao: string; honorario?: number; despesa?: number; prazo?: number; obs?: string; dt_acerto?: string; dt_envio?: string; dt_pago?: string; dt_entregue?: string; dt_denvio?: string; dt_dpago?: string; id_user_guy?: number; id_user_guilty?: number; dt_guy_pago?: string; dt_guy_dpago?: string; guy_honorario?: number; guy_despesa?: number; atividade?: string; meta?: number; ms?: number }
Serviço de API (src/services/api/trabalhos.ts):

Base URL: import.meta.env.VITE_API_URL com fallback "/api".
async function createTrabalho(data: TrabalhoInput): Promise<Trabalho>:
POST para "/trabalhos" com Content-Type: application/json.
Tratar 4xx/5xx com erro amigável; não logar dados sensíveis.
Stub local sem libs extras:
Quando o backend não estiver disponível, retornar Promise.resolve com um Trabalho simulado e id_princ fake.
Funções auxiliares de lookups (stubs):
fetchContrOptions(), fetchSegurOptions(), fetchAtiviOptions(), fetchUfOptions(), fetchCidadeOptions(id_uf), fetchUsersOptions()
Validações no frontend (sem libs extras):

Obrigatórios: id_contr, id_segur, id_ativi, id_uf, id_cidade, dt_inspecao.
Numéricos: honorario, despesa ≥ 0; prazo ≥ 0.
Datas: coerência opcional (ex.: dt_envio ≤ dt_pago); avisos não bloqueantes.
Dropdowns: UF → habilita Cidade com opções filtradas.
Desabilitar “Salvar” enquanto houver erros; exibir mensagens inline.
UI/UX premium:

Container glassmorphism com blur, sombras suaves e cabeçalho lilás/ciano com gradiente consistente.
Layout em etapas (Step/Wizard) recomendado:
Etapa 1: Básicos — Contratante, Segurado, Atividade
Etapa 2: Localização — UF, Cidade
Etapa 3: Datas e Valores — dt_inspecao, honorario, despesa, prazo, flags
Radix UI: Input, Label, Select, Switch/Checkbox, Dialog/Toast.
Framer Motion: micro-interações — entrada do card, foco suave, confirmação com leve escala/fade.
Acessibilidade: labels associados, aria-*, foco visível, navegação por teclado.
Botões: Salvar (primário), Cancelar/Voltar (secundário), estilos globais preservados.
Comportamento do formulário:

“Salvar” chama createTrabalho com TrabalhoInput.
Em sucesso: toast “Trabalho criado com sucesso”, limpar campos sensíveis/temporários, opcionalmente redirecionar para "/trabalhos".
Em erro: mostrar mensagens específicas (ex.: combinação inválida de UF/Cidade).
Não persistir em estado global; manter local do componente até envio.
Padrão visual e estrutura:

Reutilizar tokens de cores/gradientes já existentes no projeto.
Não alterar CSS global, nem mover pastas, nem quebrar componentes.
Responsivo: mobile-first; duas colunas em telas largas.
Aceitação:

Página compila sem novas dependências.
Validações e acessibilidade funcionam.
Tema glassmorphism e lilás/ciano preservado.
Payload enviado usa exatamente as chaves definidas de princ.
API stub funciona; futura troca para FastAPI será apenas de URL.
Referência de esquema (orienta integração futura com SQLite/FastAPI; não codar migração agora):

Tabela alvo princ:
id_princ INTEGER PRIMARY KEY
id_contr INTEGER (FK contr)
id_segur INTEGER (FK segur)
id_ativi INTEGER (FK ativi)
id_uf INTEGER (FK uf)
id_cidade INTEGER (FK cidade)
dt_inspecao TEXT (obrigatório)
Campos adicionais: dt_acerto, dt_envio, dt_pago, honorario REAL, dt_entregue, prazo INT, dt_denvio, dt_dpago, despesa REAL, obs TEXT, id_user_guy, id_user_guilty, dt_guy_pago, guy_honorario REAL, dt_guy_dpago, guy_despesa REAL, atividade TEXT, meta INT, ms INTEGER DEFAULT 0
Frontend envia nomes exatamente como acima; backend persiste e valida.
Entregar o código pronto para colagem, nos caminhos indicados, e incluir no README interno da feature instruções rápidas de como trocar o stub pela chamada real ao FastAPI sem alterar a UI.

